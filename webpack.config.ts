import path from 'path'import HtmlWebpackPlugin from "html-webpack-plugin";import * as webpack from 'webpack';module.exports = {    mode: 'development',    entry: {        app: path.resolve(__dirname, 'src', 'index.tsx'),        css: path.resolve(__dirname, 'src', 'index.less')    },    output: {        filename: '[name].js',        path: __dirname + '/build',        chunkFilename: '[id].[chunkhash].js',        /*path: path.resolve(__dirname, 'dist'),        filename: 'bundle.js'*/    },    plugins:[        new HtmlWebpackPlugin({            template: path.resolve(__dirname, './src/index.html'),        }),        new webpack.ProvidePlugin({            "React": "react",        }),    ],    resolve: {        // Добавить разрешения '.ts' и '.tsx' к обрабатываемым        extensions: ["", ".webpack.js", ".web.js", ".ts", ".tsx", ".js"]    },    module: {        rules: [           /* {                test: /\.svg$/,                loader: 'svg-inline-loader'            },*/            {                test: /\.(png|jp(e*)g|svg|gif)$/,                use: [                    {                        loader: 'file-loader',                        options: {                            name: 'images/[hash]-[name].[ext]',                        },                    },                ],            },            {                test: /\.css$/i,                use: [ 'style-loader', 'css-loader' ]            },            {                test: /\.txt$/,                use: 'raw-loader'            },            {                test: /\.tsx?$/,                loader: "ts-loader"            },            {                test: /\.less$/i,               // exclude: path.resolve(__dirname, './src/index.less') ,                use: [                    {                        loader: 'style-loader'                    },                    {                        loader: 'css-loader',                        options: {                            modules: {                                mode: (path) => {                                    console.log('->>',path)                                    if(/src[\\\/]index/.test(path)){                                        console.log(path,'--- global')                                        return 'global';                                    }else {                                        console.log(path,'---  local')                                    }                                  return 'local'                                },                                localIdentName:                                    '[name]__[local]__[hash:base64:5]'                            },                            sourceMap: true,                            importLoaders: 1                        }                    },                    {                        loader: 'less-loader',                        options: {                            sourceMap: true,                        }                    }                ]            },            {                test: /\.(jsx|js)$/,                include: path.resolve(__dirname, 'src'),                exclude: /node_modules/,                use: [{                    loader: 'babel-loader',                    options: {                        presets: [                            ['@babel/preset-env', {                                "targets": "defaults"                            }],                            '@babel/preset-react'                        ],                        plugins: [                            [                                require.resolve('babel-plugin-named-asset-import'),                                {                                    loaderMap: {                                        svg: {                                            ReactComponent:                                                '@svgr/webpack?-prettier,-svgo![path]',                                        },                                    },                                },                            ],                        ],                    }                }]            }        ]    },    devServer: {        static: {            directory: path.join(__dirname, 'public'),        },        historyApiFallback: true,        compress: true,        port: 9000,    },}